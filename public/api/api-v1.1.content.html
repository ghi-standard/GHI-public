<section class="page-section" id="api-v1-1">
  <h1>API v1.1 — Reference (Sandbox)</h1>

  <p class="text-muted">
    FR/EN — This page documents the <strong>GHI Sandbox API v1.1</strong>. The sandbox is designed to be stable for integrators.
    Responses may contain demo values.
  </p>

  <div class="ghi-callout">
    <p><strong>Status:</strong> Sandbox • <strong>Base URL:</strong> <code>https://&lt;your-domain&gt;/v1/ghi</code> (or <code>http://127.0.0.1:8000/v1/ghi</code> locally)</p>
    <p><strong>Format:</strong> JSON • <strong>Auth:</strong> none (sandbox) • <strong>Rate limit:</strong> best-effort</p>
  </div>

  <h2>Quickstart</h2>
  <div class="table-wrapper">
    <table class="snapshot-table">
      <thead>
        <tr>
          <th>Goal</th>
          <th>Command</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Fetch snapshot</td>
          <td><code>curl -s http://127.0.0.1:8000/v1/ghi/snapshot | jq</code></td>
        </tr>
        <tr>
          <td>List regions</td>
          <td><code>curl -s http://127.0.0.1:8000/v1/ghi/regions | jq</code></td>
        </tr>
        <tr>
          <td>Region detail</td>
          <td><code>curl -s http://127.0.0.1:8000/v1/ghi/regions/us | jq</code></td>
        </tr>
        <tr>
          <td>Global history</td>
          <td><code>curl -s "http://127.0.0.1:8000/v1/ghi/history?region_id=global" | jq</code></td>
        </tr>
      </tbody>
    </table>
  </div>

  <h2>Endpoints</h2>

  <h3><code>GET /v1/ghi/snapshot</code></h3>
  <p>Returns the latest global snapshot (min/avg/max production cost, plus metadata).</p>
  <pre><code>{
  "timestamp_utc": "2025-12-11T19:56:27.777989Z",
  "engine_sandbox_version": "0.4.3-sandbox",
  "version": "1.1",
  "global_min_cost_usd": 36000.0,
  "global_avg_cost_usd": 43000.0,
  "global_max_cost_usd": 53000.0
}</code></pre>

  <h3><code>GET /v1/ghi/regions</code></h3>
  <p>Returns the region registry exposed by the sandbox.</p>
  <pre><code>{
  "version": "1.1",
  "timestamp_utc": "2025-12-11T19:56:27.777989Z",
  "region_count": 3,
  "regions": [
    { "id": "us", "name": "United States" },
    { "id": "eu", "name": "Europe" },
    { "id": "cn", "name": "China" }
  ]
}</code></pre>

  <h3><code>GET /v1/ghi/regions/{id}</code></h3>
  <p>Returns details for one region. The payload is intended to be stable for dashboard integrations.</p>
  <pre><code>{
  "version": "1.1",
  "timestamp_utc": "2025-12-11T19:56:27.777989Z",
  "region_id": "us",
  "name": "United States",
  "min_cost_usd": 38000.0,
  "avg_cost_usd": 45000.0,
  "max_cost_usd": 56000.0,
  "hashrate_share_pct": 32.0
}</code></pre>

  <h3><code>GET /v1/ghi/history?region_id=global</code></h3>
  <p>Returns time-series points for the requested region. The sandbox guarantees increasing dates in <code>points[]</code>.</p>
  <pre><code>{
  "version": "1.1",
  "timestamp_utc": "2025-12-11T19:56:27.781785Z",
  "engine_sandbox_version": "0.4.3-sandbox",
  "region_id": "global",
  "points": [
    { "date": "2025-12-01", "min_cost_usd": 35000.0, "avg_cost_usd": 41200.0, "max_cost_usd": 49500.0, "currency": "USD" },
    { "date": "2025-12-02", "min_cost_usd": 35200.0, "avg_cost_usd": 41500.0, "max_cost_usd": 49800.0, "currency": "USD" }
  ]
}</code></pre>

  <h2>Notes for integrators</h2>
  <ul>
    <li>All timestamps are UTC and ISO-8601.</li>
    <li>Numeric fields are floats; clients should round for display.</li>
    <li>Sandbox may return demo values; stability of structure matters more than accuracy here.</li>
  </ul>
</section>