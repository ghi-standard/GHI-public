<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>GHI – API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Documentation de l’API du Global HashCost Index (sandbox)." />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="page-shell">

    <header>
      <div class="site-title">
        <h1>Global HashCost Index</h1>
        <p style="color:#f9fafb; text-shadow:0 1px 2px rgba(15,23,42,0.7);">
          Un indicateur ouvert du coût de production du Bitcoin.
        </p>
        <p style="color:#cbd5e1; font-size:0.85rem; margin-top:2px;">
          Version : GHI Standard v1.0 – API sandbox
        </p>
      </div>
    </header>

    <nav>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="methodology.html">Méthodologie</a></li>
        <li><a href="regions.html">Régions</a></li>
        <li><a href="api.html" class="active">API</a></li>
        <li><a href="engine.html" class="active">Moteur</a></li>
        <li><a href="governance.html">Gouvernance</a></li>
        <li><a href="ghi-for-institutions.html">GHI for Institutions</a></li>
        <li><a href="roadmap.html">Roadmap</a></li>
        <li><a href="changelog.html">Changelog</a></li>
        <li><a href="about.html">À propos</a></li>
        <li><a href="legal.html">Mentions légales</a></li>
      </ul>
    </nav>

    <main class="api-section">
      <h2>API GHI – Sandbox (pré-version)</h2>

      <p>
        L’API GHI est actuellement disponible sous forme de <strong>sandbox</strong>. Elle suit le
        <code>GHI Data Model v1.0</code> et retourne des données <strong>synthétiques</strong>
        (fake data), mais avec une structure identique à celle de l’API de production future.
      </p>

      <p>
        Cette sandbox permet :
      </p>
      <ul>
        <li>de valider l’architecture des modèles de données ;</li>
        <li>d’intégrer l’API dans des dashboards ou outils internes ;</li>
        <li>de tester des flux institutionnels (risque, reporting, ESG) sans exposer le moteur réel.</li>
      </ul>

      <h3>Base et version</h3>
      <p><strong>Base locale (développement)</strong></p>
      <pre><code>http://127.0.0.1:8000</code></pre>

      <p><strong>Préfixe de version</strong></p>
      <pre><code>/v1/ghi</code></pre>

      <p>Toutes les réponses sont en <strong>JSON</strong>, avec des timestamps au format
        <strong>ISO 8601 (UTC)</strong>.
      </p>

      <hr />

      <h3>Modèles principaux</h3>

      <h4>Objet <code>Cost</code></h4>
      <pre><code>{
  "min_cost_btc": 20000.0,
  "avg_cost_btc": 25000.0,
  "max_cost_btc": 30000.0
}</code></pre>

      <h4>Objet <code>Region</code></h4>
      <pre><code>{
  "region_id": "north_america",
  "name": "North America",
  "hashrate_pct": 0.35,
  "cost": {
    "min_cost_btc": 21000.0,
    "avg_cost_btc": 26000.0,
    "max_cost_btc": 31000.0
  },
  "energy": {
    "price_min_usd_kwh": 0.04,
    "price_avg_usd_kwh": 0.06,
    "price_max_usd_kwh": 0.08
  },
  "hardware": {
    "efficiency_min_w_th": 20.0,
    "efficiency_avg_w_th": 25.0,
    "efficiency_max_w_th": 30.0
  },
  "metadata": {
    "updated_at": "2025-01-01T12:00:00Z",
    "data_source": "fake_public"
  }
}</code></pre>

      <h4>Objet <code>Snapshot</code></h4>
      <pre><code>{
  "timestamp": "2025-01-01T12:00:00Z",
  "ghi": {
    "min_cost_btc": 23000.0,
    "avg_cost_btc": 26000.0,
    "max_cost_btc": 29000.0
  },
  "difficulty": 80000000000000.0,
  "hashrate_total_th": 600000000.0,
  "block_reward_btc": 3.125,
  "regions": [ ... ],
  "version": "1.0"
}</code></pre>

      <h4>Objet <code>HistoryPoint</code></h4>
      <pre><code>{
  "timestamp": "2025-01-01T00:00:00Z",
  "min_cost_btc": 22000.0,
  "avg_cost_btc": 25000.0,
  "max_cost_btc": 28000.0,
  "difficulty": 80000000000000.0,
  "hashrate_total_th": 600000000.0
}</code></pre>

      <h4>Objet <code>Stats</code></h4>
      <pre><code>{
  "timestamp": "2025-01-01T12:00:00Z",
  "regions_count": 3,
  "avg_hashrate_total_th": 600000000.0,
  "avg_cost_btc": 25000.0,
  "notes": "Sandbox stats on fake data – GHI Data Model v1.0 compatible."
}</code></pre>

      <hr />

      <h3>Endpoints disponibles</h3>

      <h4>GET <code>/v1/ghi/snapshot</code></h4>
      <p>
        Retourne un snapshot global du GHI à l’instant T, incluant :
        coût min/avg/max, difficulté, hashrate total, récompense de bloc et liste des régions.
      </p>

      <p><strong>Exemple de requête</strong></p>
      <pre><code>GET /v1/ghi/snapshot HTTP/1.1
Host: 127.0.0.1:8000</code></pre>

      <p><strong>Exemple de réponse (JSON)</strong></p>
      <pre><code>{
  "timestamp": "2025-01-01T12:00:00Z",
  "ghi": { "min_cost_btc": 23000.0, "avg_cost_btc": 26000.0, "max_cost_btc": 29000.0 },
  "difficulty": 80000000000000.0,
  "hashrate_total_th": 600000000.0,
  "block_reward_btc": 3.125,
  "regions": [ ... ],
  "version": "1.0"
}</code></pre>

      <h4>GET <code>/v1/ghi/history</code></h4>
      <p>
        Retourne une série temporelle agrégée de GHI (données sandbox), utile pour des graphiques et du backtesting.
      </p>
      <p><strong>Exemple de requête</strong></p>
      <pre><code>GET /v1/ghi/history HTTP/1.1
Host: 127.0.0.1:8000</code></pre>

      <p><strong>Exemple de réponse (JSON)</strong></p>
      <pre><code>[
  {
    "timestamp": "2025-01-01T00:00:00Z",
    "min_cost_btc": 22000.0,
    "avg_cost_btc": 25000.0,
    "max_cost_btc": 28000.0,
    "difficulty": 80000000000000.0,
    "hashrate_total_th": 600000000.0
  },
  {
    "timestamp": "2025-01-02T00:00:00Z",
    "min_cost_btc": 22100.0,
    "avg_cost_btc": 25100.0,
    "max_cost_btc": 28100.0,
    "difficulty": 80000100000000.0,
    "hashrate_total_th": 600100000.0
  }
]</code></pre>

      <h4>GET <code>/v1/ghi/regions</code></h4>
      <p>
        Liste les régions suivies dans la sandbox, avec part de hashrate et coûts synthétiques.
      </p>

      <p><strong>Exemple de requête</strong></p>
      <pre><code>GET /v1/ghi/regions HTTP/1.1
Host: 127.0.0.1:8000</code></pre>

      <p><strong>Exemple de réponse (JSON, simplifiée)</strong></p>
      <pre><code>[
  { "region_id": "north_america", "name": "North America", "hashrate_pct": 0.35, ... },
  { "region_id": "europe", "name": "Europe", "hashrate_pct": 0.25, ... },
  { "region_id": "asia_no_china", "name": "Asia (ex-China)", "hashrate_pct": 0.20, ... }
]</code></pre>

      <h4>GET <code>/v1/ghi/regions/{region_id}</code></h4>
      <p>
        Retourne le détail complet d’une région (coûts, énergie, hardware, métadonnées).
      </p>

      <p><strong>Exemple de requête</strong></p>
      <pre><code>GET /v1/ghi/regions/north_america HTTP/1.1
Host: 127.0.0.1:8000</code></pre>

      <p><strong>Exemple de réponse (JSON, simplifiée)</strong></p>
      <pre><code>{
  "region_id": "north_america",
  "name": "North America",
  "hashrate_pct": 0.35,
  "cost": { "min_cost_btc": 21000.0, "avg_cost_btc": 26000.0, "max_cost_btc": 31000.0 },
  "energy": { "price_min_usd_kwh": 0.04, "price_avg_usd_kwh": 0.06, "price_max_usd_kwh": 0.08 },
  "hardware": { "efficiency_min_w_th": 20.0, "efficiency_avg_w_th": 25.0, "efficiency_max_w_th": 30.0 },
  "metadata": { "updated_at": "2025-01-01T12:00:00Z", "data_source": "fake_public" }
}</code></pre>

      <h4>GET <code>/v1/ghi/stats</code></h4>
      <p>
        Retourne des statistiques globales sur l’ensemble des régions (sandbox).
      </p>

      <p><strong>Exemple de requête</strong></p>
      <pre><code>GET /v1/ghi/stats HTTP/1.1
Host: 127.0.0.1:8000</code></pre>

      <p><strong>Exemple de réponse (JSON)</strong></p>
      <pre><code>{
  "timestamp": "2025-01-01T12:00:00Z",
  "regions_count": 3,
  "avg_hashrate_total_th": 600000000.0,
  "avg_cost_btc": 25000.0,
  "notes": "Sandbox stats on fake data – GHI Data Model v1.0 compatible."
}</code></pre>

      <hr />

      <h3>Documentation interactive & référence formelle</h3>

      <p>
        Lorsque le moteur sandbox est lancé, la documentation interactive (OpenAPI) est disponible à :
      </p>
      <pre><code>http://127.0.0.1:8000/docs</code></pre>

      <p>
        La référence formelle complète de l’API sandbox est maintenue dans
        <code>API_REFERENCE.md</code> au sein du dépôt
        <a href="https://github.com/ghi-standard/GHI-public" target="_blank" rel="noopener noreferrer">
          GHI-public
        </a>, en cohérence avec :
      </p>
      <ul>
        <li><code>standard/GHI-Data-Model-v1.0.md</code></li>
        <li><code>standard/GHI-Technical-Standard-v1.0.md</code></li>
      </ul>

      <p>
        La future API de production (avec moteur réel et données issues du modèle complet) sera
        introduite lors de la <strong>Phase 3</strong> de la roadmap, après validation interne
        et revue institutionnelle.
      </p>
<h3>Developer Guide (Sandbox)</h3>
<p>
  Le guide développeur détaillé pour utiliser la sandbox API est disponible ici :
</p>

<p>
  <a class="cta-download" href="https://github.com/ghi-standard/ghi-engine/blob/main/README.md" target="_blank" rel="noopener noreferrer">
    Ouvrir le Developer Guide (Sandbox)
  </a>
</p>

<p style="font-size:0.9rem; color:#94a3b8;">
  Ce guide explique : l'installation, le lancement du moteur sandbox, les endpoints,
  les modèles de données, les tests et la structure du projet.
</p>

<h2>Developer Pack</h2>
<p>
  The official GHI Developer Pack contains example JSON files, a Python client,
  a complete Jupyter notebook, cURL examples, and a pytest suite for verifying sandbox integration.
</p>

<a class="cta-download" href="/devpack/GHI-Developer-Pack-v0.2.0.zip" download>
  Download Developer Pack v0.2.0
</a>

    </main>

  </div>

  <footer>
    <p>© Global HashCost Index – Modèle ouvert. Aucune recommandation d’investissement.</p>
  </footer>
</body>
</html>
