<main>

  <div class="lang-switch">
    Langue / Language :
    <a href="#fr-api-ref">FR</a> ·
    <a href="#en-api-ref">EN</a>
  </div>

  <!-- ========================================================= -->
  <!-- ========================= FR ============================= -->
  <!-- ========================================================= -->

  <section id="fr-api-ref">
    <h2>API Reference – Version 1.1</h2>

    <div class="card">
      <h3>1. Présentation générale</h3>
      <p>
        Cette page fournit la référence technique complète de l’API GHI v1.1.  
        Toutes les structures, paramètres, réponses et exemples sont documentés dans un format homogène destiné aux environnements institutionnels.
      </p>
      <p>
        Les données proviennent du <strong>Sandbox Engine</strong>.  
        Les mêmes structures seront utilisées dans les éditions premium (versions institutionnelles enrichies).
      </p>
    </div>

    <!-- ENDPOINT SUMMARY -->
    <div class="card">
      <h3>2. Liste des endpoints</h3>

      <table class="table-api">
        <thead>
          <tr><th>Endpoint</th><th>Méthode</th><th>Usage</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><code>/v1/ghi/snapshot</code></td>
            <td>GET</td>
            <td>Coûts min/avg/max par région + données globales</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/history</code></td>
            <td>GET</td>
            <td>Séries temporelles synthétiques</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/regions</code></td>
            <td>GET</td>
            <td>Liste des régions GHI disponibles</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/metadata</code></td>
            <td>GET</td>
            <td>Métadonnées globales (API + moteur)</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/network</code></td>
            <td>GET</td>
            <td>Métriques réseau synthétiques (exp. : hashrate)</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/forecast</code></td>
            <td>GET</td>
            <td>Prévision synthétique du coût moyen</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- METADATA -->
    <div class="card">
      <h3>3. Métadonnées communes (toutes réponses)</h3>

      <pre><code>{
  "version": "1.1",
  "timestamp_utc": "2025-12-09T12:00:00Z",
  "engine_sandbox_version": "0.4.0-sandbox"
}</code></pre>

      <p>
        Ces champs sont présents dans <strong>toutes</strong> les réponses.  
        Ils permettent de tracer les requêtes, monitorer la stabilité des versions, et auditer les pipelines de données.
      </p>
    </div>

    <!-- SNAPSHOT -->
    <div class="card">
      <h3>4. Endpoint : /v1/ghi/snapshot</h3>

      <p>
        Fournit les coûts actuels de production du Bitcoin par région, avec les statistiques globales :
      </p>

      <h4>Structure de réponse</h4>
      <pre><code>{
  "version": "1.1",
  "timestamp_utc": "...",
  "engine_sandbox_version": "0.4.0-sandbox",
  "region_count": 3,
  "regions": [
    {
      "region_id": "us",
      "currency": "USD",
      "min_cost_usd": 38000.0,
      "avg_cost_usd": 42000.0,
      "max_cost_usd": 50000.0
    }
  ],
  "global_min_cost_usd": 35000.0,
  "global_avg_cost_usd": 42000.0,
  "global_max_cost_usd": 52000.0
}</code></pre>

      <h4>Notes institutionnelles</h4>
      <ul>
        <li>Format strictement stable entre toutes les versions mineures (1.x).</li>
        <li>Les régions sont garanties nominalement stables.</li>
      </ul>
    </div>

    <!-- HISTORY -->
    <div class="card">
      <h3>5. Endpoint : /v1/ghi/history</h3>

      <h4>Paramètres</h4>
      <table class="table-api">
        <thead><tr><th>Paramètre</th><th>Type</th><th>Description</th></tr></thead>
        <tbody>
          <tr>
            <td><code>region_id</code></td>
            <td>string</td>
            <td>ID de région (ex : "us") ou "global"</td>
          </tr>
        </tbody>
      </table>

      <h4>Structure de réponse</h4>
      <pre><code>{
  "region_id": "global",
  "points": [
    {
      "date": "2025-12-01",
      "min_cost_usd": 41000.0,
      "avg_cost_usd": 45000.0,
      "max_cost_usd": 49500.0
    }
  ]
}</code></pre>
    </div>

    <!-- REGIONS -->
    <div class="card">
      <h3>6. Endpoint : /v1/ghi/regions</h3>

      <pre><code>{
  "version": "1.1",
  "timestamp_utc": "...",
  "regions": [
    {"id": "us", "name": "United States"},
    {"id": "eu", "name": "Europe"},
    {"id": "cn", "name": "China"}
  ],
  "region_count": 3
}</code></pre>
    </div>

    <!-- METADATA ENDPOINT -->
    <div class="card">
      <h3>7. Endpoint : /v1/ghi/metadata</h3>

      <pre><code>{
  "version": "1.1",
  "timestamp_utc": "...",
  "engine_sandbox_version": "0.4.0-sandbox",
  "available_endpoints": [
    "/v1/ghi/snapshot",
    "/v1/ghi/history",
    "/v1/ghi/regions",
    "/v1/ghi/metadata",
    "/v1/ghi/network",
    "/v1/ghi/forecast"
  ]
}</code></pre>
    </div>

    <!-- NETWORK -->
    <div class="card">
      <h3>8. Endpoint : /v1/ghi/network</h3>

      <pre><code>{
  "hashrate_eh": 554.0,
  "difficulty": 8.9e13,
  "avg_fee_usd": 4.2
}</code></pre>
    </div>

    <!-- FORECAST -->
    <div class="card">
      <h3>9. Endpoint : /v1/ghi/forecast</h3>

      <h4>Paramètres</h4>
      <table class="table-api">
        <thead><tr><th>Nom</th><th>Type</th><th>Description</th></tr></thead>
        <tbody>
          <tr>
            <td><code>forecast_days</code></td>
            <td>int</td>
            <td>Fenêtre de prévision (défaut : 7 jours)</td>
          </tr>
        </tbody>
      </table>

      <h4>Exemple</h4>
      <pre><code>{
  "forecast_days": 7,
  "predicted_avg_cost_usd": 62300.0
}</code></pre>
    </div>

  </section>

  <!-- ========================================================= -->
  <!-- ========================= EN ============================= -->
  <!-- ========================================================= -->

  <section id="en-api-ref">
    <h2>API Reference – Version 1.1</h2>

    <div class="card">
      <h3>1. Overview</h3>
      <p>
        This page provides the complete technical reference for the GHI API v1.1.
        All response structures, parameters, and examples are documented in a uniform, institutional-grade format.
      </p>
    </div>

    <div class="card">
      <h3>2. Endpoint list</h3>
      <table class="table-api">
        <thead>
          <tr><th>Endpoint</th><th>Method</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><code>/v1/ghi/snapshot</code></td>
            <td>GET</td>
            <td>Min/avg/max production costs per region + globals</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/history</code></td>
            <td>GET</td>
            <td>Synthetic historical time series</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/regions</code></td>
            <td>GET</td>
            <td>Available GHI regions</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/metadata</code></td>
            <td>GET</td>
            <td>API + engine metadata</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/network</code></td>
            <td>GET</td>
            <td>Synthetic network metrics</td>
          </tr>
          <tr>
            <td><code>/v1/ghi/forecast</code></td>
            <td>GET</td>
            <td>Synthetic cost forecast</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Metadata EN -->
    <div class="card">
      <h3>3. Common metadata</h3>
      <pre><code>{
  "version": "1.1",
  "timestamp_utc": "...",
  "engine_sandbox_version": "0.4.0-sandbox"
}</code></pre>
    </div>

    <!-- Snapshot EN -->
    <div class="card">
      <h3>4. Endpoint: /v1/ghi/snapshot</h3>
      <p>Current production-cost metrics per region, including global statistics.</p>
      <pre><code>{
  "region_count": 3,
  "regions": [
    {
      "region_id": "us",
      "min_cost_usd": 38000.0,
      "avg_cost_usd": 42000.0,
      "max_cost_usd": 50000.0
    }
  ]
}</code></pre>
    </div>

    <!-- History EN -->
    <div class="card">
      <h3>5. Endpoint: /v1/ghi/history</h3>
      <pre><code>{
  "region_id": "global",
  "points": [
    {
      "date": "2025-12-01",
      "min_cost_usd": 41000.0,
      "avg_cost_usd": 45000.0,
      "max_cost_usd": 49500.0
    }
  ]
}</code></pre>
    </div>

    <!-- Regions EN -->
    <div class="card">
      <h3>6. Endpoint: /v1/ghi/regions</h3>
      <pre><code>{
  "regions": [
    {"id": "us", "name": "United States"},
    {"id": "eu", "name": "Europe"},
    {"id": "cn", "name": "China"}
  ]
}</code></pre>
    </div>

    <!-- Metadata EN -->
    <div class="card">
      <h3>7. Endpoint: /v1/ghi/metadata</h3>
      <pre><code>{
  "available_endpoints": [
    "/v1/ghi/snapshot",
    "/v1/ghi/history",
    "/v1/ghi/regions",
    "/v1/ghi/metadata",
    "/v1/ghi/network",
    "/v1/ghi/forecast"
  ]
}</code></pre>
    </div>

    <!-- Network EN -->
    <div class="card">
      <h3>8. Endpoint: /v1/ghi/network</h3>
      <pre><code>{
  "hashrate_eh": 554.0,
  "difficulty": 8.9e13,
  "avg_fee_usd": 4.2
}</code></pre>
    </div>

    <!-- Forecast EN -->
    <div class="card">
      <h3>9. Endpoint: /v1/ghi/forecast</h3>
      <pre><code>{
  "forecast_days": 7,
  "predicted_avg_cost_usd": 62300.0
}</code></pre>
    </div>

  </section>

</main>