<main class="dashboard-main">
  <p class="lang-switch">
    Langue / Language :
    <a href="#fr-dashboard">FR</a> ·
    <a href="#en-dashboard">EN</a>
  </p>

  <section class="dashboard-card">
    <h1>
      Dashboard Global HashCost Index (pré-version) /
      Global HashCost Index Dashboard (pre-release)
    </h1>

    <p>
      Cette page présente une version <strong>Dashboard V2.3</strong> du GHI,
      alignée avec la <strong>roadmap publique v1.2 / v1.3</strong>.
      Les données affichées proviennent de l’API sandbox GHI (API v1.1).
    </p>

    <p class="text-muted">
      This page shows <strong>Dashboard V2.3</strong>, aligned with the
      <strong>public roadmap v1.2 / v1.3</strong>. Data is loaded from the
      GHI sandbox API (API v1.1).
    </p>

    <!-- ======================= SECTION FR ======================= -->
    <section id="fr-dashboard">
      <h2>Sandbox GHI Snapshot (API v1.1)</h2>

      <h3>Snapshot global – structure</h3>
      <p>
        Structure de référence pour un snapshot global (coût min / moyen / max,
        date, version du modèle).
      </p>

      <div class="table-wrapper">
        <table class="snapshot-table">
          <thead>
            <tr>
              <th>Date de référence</th>
              <th>Coût min (USD/BTC)</th>
              <th>Coût moyen (USD/BTC)</th>
              <th>Coût max (USD/BTC)</th>
              <th>Version du modèle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>2025-01-01</td>
              <td>20&nbsp;000</td>
              <td>28&nbsp;000</td>
              <td>36&nbsp;000</td>
              <td>GHI v1.x (exemple)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Coût de production par région – (dynamique)</h3>
      <p>
        Données chargées depuis <code>/api/latest.json</code> (sandbox).
      </p>

      <div class="table-wrapper">
        <table class="snapshot-table">
          <thead>
            <tr>
              <th>Région</th>
              <th>Coût min</th>
              <th>Coût moyen</th>
              <th>Coût max</th>
              <th>Part du hashrate</th>
              <th>Source</th>
            </tr>
          </thead>
          <tbody id="ghi-regions-rows-fr">
            <tr>
              <td colspan="6">Chargement…</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Historique global – (beta)</h3>
      <p>
        Tentative de chargement depuis
        <code>/v1/ghi/history?region_id=global</code>.
        Un fallback est affiché si la source est indisponible.
      </p>

      <div class="ghi-placeholder" id="ghi-history-fr">
        Chargement de l’historique…
      </div>

      <!-- Indicateur FR -->
      <section id="fr" class="page-section">
        <h2>Relation prix / coût global de production (GHI)</h2>

        <div class="ghi-indicator-card">
          <div class="ghi-indicator-header">
            <h3 class="ghi-indicator-title">
              Vue rapide – Prix vs coût de production
            </h3>
            <p class="ghi-indicator-meta">
              <span class="meta-label">Mode :</span>
              <span class="meta-value">Sandbox</span>
              <span class="meta-sep">•</span>
              <span class="meta-label">Source :</span>
              <span class="meta-value">/api/latest.json</span>
            </p>
          </div>

          <div class="ghi-quick-indicator">
            <div class="ghi-quick-metrics">
              <div class="ghi-quick-metric">
                <span class="label">Prix BTC (USD)</span>
                <span class="value" id="ghi-price-btc">–</span>
              </div>
              <div class="ghi-quick-metric">
                <span class="label">Coût moyen (USD/BTC)</span>
                <span class="value" id="ghi-avg-cost-btc">–</span>
              </div>
              <div class="ghi-quick-metric">
                <span class="label">Coût min / max</span>
                <span class="value" id="ghi-min-max-cost-btc">–</span>
              </div>
            </div>

            <div class="ghi-gauge-wrapper">
              <div class="ghi-gauge-labels">
                <span>Sous le coût</span>
                <span>Autour du coût</span>
                <span>Au-dessus du coût</span>
              </div>
              <div class="ghi-gauge-track">
                <div
                  class="ghi-gauge-marker"
                  id="ghi-gauge-marker"
                  style="left: 50%;"
                ></div>
              </div>
            </div>

            <p class="ghi-quick-note" id="ghi-quick-note">
              Chargement des données sandbox…
            </p>
          </div>
        </div>
      </section>
    </section>

    <!-- ======================= SECTION EN ======================= -->
    <section id="en-dashboard" style="margin-top: 3rem;">
      <h2>Sandbox GHI Snapshot (API v1.1)</h2>

      <h3>Global snapshot – structure</h3>

      <div class="table-wrapper">
        <table class="snapshot-table">
          <thead>
            <tr>
              <th>Reference date</th>
              <th>Min cost (USD/BTC)</th>
              <th>Avg cost (USD/BTC)</th>
              <th>Max cost (USD/BTC)</th>
              <th>Model version</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>2025-01-01</td>
              <td>20&nbsp;000</td>
              <td>28&nbsp;000</td>
              <td>36&nbsp;000</td>
              <td>GHI v1.x (example)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Production cost by region – (dynamic)</h3>
      <p>
        Loaded from <code>/api/latest.json</code> (sandbox).
      </p>

      <div class="table-wrapper">
        <table class="snapshot-table">
          <thead>
            <tr>
              <th>Region</th>
              <th>Min cost</th>
              <th>Avg cost</th>
              <th>Max cost</th>
              <th>Hashrate share</th>
              <th>Source</th>
            </tr>
          </thead>
          <tbody id="ghi-regions-rows-en">
            <tr>
              <td colspan="6">Loading…</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>Global history – (beta)</h3>
      <p>
        Attempted load from
        <code>/v1/ghi/history?region_id=global</code>.
      </p>

      <div class="ghi-placeholder" id="ghi-history-en">
        Loading history…
      </div>

      <!-- Indicator EN -->
      <section id="en" class="page-section">
        <h2>Price vs Global Production Cost (GHI)</h2>

        <div class="ghi-indicator-card">
          <div class="ghi-indicator-header">
            <h3 class="ghi-indicator-title">
              Quick view – Price vs production cost
            </h3>
          </div>

          <div class="ghi-quick-indicator">
            <div class="ghi-quick-metrics">
              <div class="ghi-quick-metric">
                <span class="label">BTC price (USD)</span>
                <span class="value" id="ghi-price-btc-en">–</span>
              </div>
              <div class="ghi-quick-metric">
                <span class="label">Avg cost (USD/BTC)</span>
                <span class="value" id="ghi-avg-cost-btc-en">–</span>
              </div>
              <div class="ghi-quick-metric">
                <span class="label">Min / max cost</span>
                <span class="value" id="ghi-min-max-cost-btc-en">–</span>
              </div>
            </div>

            <div class="ghi-gauge-wrapper">
              <div class="ghi-gauge-labels">
                <span>Below cost</span>
                <span>Near cost</span>
                <span>Above cost</span>
              </div>
              <div class="ghi-gauge-track">
                <div
                  class="ghi-gauge-marker"
                  id="ghi-gauge-marker-en"
                  style="left: 50%;"
                ></div>
              </div>
            </div>

            <p class="ghi-quick-note" id="ghi-quick-note-en">
              Loading sandbox data…
            </p>
          </div>
        </div>
      </section>
    </section>

    <script src="dashboard.js?v=5"></script>
  </section>
</main>